class DataFetcher{async _fetchData(e){try{return(await fetch("https://jsonplaceholder.typicode.com/"+e)).json()}catch(e){console.log(e)}}fetchUsers(){return this._fetchData("users")}fetchPosts(e){return this._fetchData("posts?userId="+e)}}class DOMElement{constructor(e,t){this._element=document.createElement(e),this._root=document.querySelector(t)}setContent(e,t="beforeend"){return this._element.insertAdjacentHTML(t,e),this}addClass(e){return this._element.classList.add(e),this}setAttribute(e,t){return this._element.setAttribute(e,t),this}toHTML(){this._root.append(this._element)}}const fetcher=new DataFetcher;function createCompanyContent({company:{name:e,catchPhrase:t,bs:s}}){return`\n    <p class="company__name">Company: ${e}</p>\n    <p class="company__phrase">Catch Phrase: <span>"${t}"</span></p>\n    <p class="company__bs">BS: ${s}</p>\n  `}function createCompany(e){new DOMElement("div",`[data-user="${e.id}"]`).addClass("company").setContent(createCompanyContent(e)).toHTML()}function createAddressContent({address:{street:e,suite:t,city:s,zipcode:n,geo:a}}){return`\n    <p class="address__street">Street: ${e}</p>\n    <p class="address__suite">Suite: ${t}</p>\n    <p class="address__city">City: ${s}</p>\n    <p class="address__zipcode">Zipcode: ${n}</p>\n    <div>\n      <p>Lat: ${a.lat}</p>\n      <p>Lng: ${a.lng}</p>\n    </div>\n  `}function createAddress(e){new DOMElement("div",`[data-user="${e.id}"]`).addClass("address").setContent(createAddressContent(e)).toHTML()}function createUsersContent({name:e,phone:t,username:s,website:n}){return`\n    <p class="users__name">Name: ${e}</p>\n    <p class="users__phone">Phone: ${t}</p>\n    <p class="users__username">Username: ${s}</p>\n    <p class="users__website">Website: ${n}</p>\n  `}async function createUsers(){new DOMElement("ul",".content").addClass("users").toHTML();(await fetcher.fetchUsers()).forEach(e=>{new DOMElement("li",".users").addClass("users__item").setContent(createUsersContent(e)).setAttribute("data-user",e.id).toHTML(),createCompany(e),createAddress(e)})}function createPostItemContent({title:e,body:t}){return`\n    <a class="posts__link" href="#">\n      <h3 class="posts__title">${e}</h3>\n      <p class="posts__text">${t}</p>\n    </a>\n  `}function createPostItem(e){e.forEach(e=>{new DOMElement("li",".posts").addClass("posts__item").setContent(createPostItemContent(e)).toHTML()})}function createPosts(){new DOMElement("ul",".content").addClass("posts").setContent('<p class="select-user">Select user</p>').toHTML();const e=document.querySelectorAll(".users__item");e.forEach(t=>{t.addEventListener("click",()=>{document.querySelector(".posts").innerHTML="",e.forEach(e=>e.classList.remove("active")),t.classList.add("active"),fetcher.fetchPosts(t.dataset.user).then(e=>createPostItem(e))})})}async function createContent(e){new DOMElement("div",".app").addClass("content").toHTML();for(const t of e)await t()}function createHeader(){new DOMElement("header",".app").addClass("header").setContent("Самые свежие статьи на диком западе").toHTML()}function createFooter(){new DOMElement("footer",".app").addClass("footer").setContent("footer").toHTML()}document.addEventListener("DOMContentLoaded",()=>{createHeader(),createContent([createUsers,createPosts]),createFooter()});